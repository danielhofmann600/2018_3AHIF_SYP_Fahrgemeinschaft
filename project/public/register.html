<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="stylesheet.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <title>Fahrgemeinschaft</title>
  </head>
  <body>
    <section>
      <table class="headerTable">
        <tr>
          <td><a href="index.html"><img src="logo.png" alt="Fahrgemeinschaft"></a></td>
          <td id="tableLogin"><a href="login.html" class="w3-button w3-block w3-black" role="button">Login</a></td>
          <td id="tableRegister"><a href="register.html" class="w3-button w3-block w3-black" role="button">Register</a></td>
        </tr>
      </table>
    </section>
    <h1><span class="w3-tag w3-wide">Fahrgemeinschaft</span></h1>

    <section>
      <div class="register">
        <form class="registerInputs" id="postData">
            <p>Vorname: <input type="text" name="" id="firstname"></p>
            <p>Nachname: <input type="text" name="" id="lastname"></p>
            <p>E-mail: <input type="text" name="" id="email"></p>
            <p>Tel.:  <input type="text" name="" id="phonenumber"></p>
            <p>Password: <input type="password" name="" id="password"></p>
            <p>Wiederholen: <input type="password" name="" id="confirmpassword"></p>
            <br>
          <!--  <button type="button"class="w3-button w3-block w3-black" role="button" id="register" name="registerButton">Register</button>-->
          <input type="submit" class="w3-button w3-block w3-black" value="Register">
        </form>
    </div>
  </section>
  <script>
    document.getElementById('postData').addEventListener('submit', postData);

    function postData(event){
               event.preventDefault();
               let firstname = document.getElementById('firstname').value;
               let lastname  = document.getElementById('lastname').value;
               let email = document.getElementById('email').value;
               let phonenumber  = document.getElementById('phonenumber').value;
               let password = document.getElementById('password').value;
               let confirmpassword  = document.getElementById('confirmpassword').value;

               if(password != confirmpassword){
                 alert("Passwort stimmt nicht nicht Ã¼berein");
                 return;
               }
              let link = 'http://192.168.99.100:3000/v1/user';
               fetch(link, {
                   method: 'POST',
                   headers : new Headers(),
                   body:JSON.stringify({username:email,firstName:firstname, lastName:lastname,password:password,isDriver:0,departureTime:null})
               }).then((res) => res.json())
               .then((data) =>  console.log(data))
               .catch((err)=>console.log(err))
           }
  </script>
  </body>
</html>
